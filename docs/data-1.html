<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Data | Who puts their city on the map?</title>
  <meta name="description" content="Chapter 2 Data | Who puts their city on the map?" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Data | Who puts their city on the map?" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Data | Who puts their city on the map?" />
  
  
  

<meta name="author" content="Daniel Kuhlen" />


<meta name="date" content="2023-02-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="a-caucus-race-and-a-long-tale.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Project</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.1</b> Data</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#aim"><i class="fa fa-check"></i><b>1.2</b> Aim</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#contact-information"><i class="fa fa-check"></i><b>1.3</b> Contact Information</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-1.html"><a href="data-1.html"><i class="fa fa-check"></i><b>2</b> Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-1.html"><a href="data-1.html#data-import"><i class="fa fa-check"></i><b>2.1</b> Data Import</a></li>
<li class="chapter" data-level="2.2" data-path="data-1.html"><a href="data-1.html#data-wrangling"><i class="fa fa-check"></i><b>2.2</b> Data Wrangling</a></li>
<li class="chapter" data-level="2.3" data-path="data-1.html"><a href="data-1.html#data-export-excel"><i class="fa fa-check"></i><b>2.3</b> Data Export Excel</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="a-caucus-race-and-a-long-tale.html"><a href="a-caucus-race-and-a-long-tale.html"><i class="fa fa-check"></i><b>3</b> A caucus-race and a long tale</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Who puts their city on the map?</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-1" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Data<a href="data-1.html#data-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="data-import" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Data Import<a href="data-1.html#data-import" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-1.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># packages</span></span>
<span id="cb1-2"><a href="data-1.html#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="data-1.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="data-1.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-5"><a href="data-1.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb1-6"><a href="data-1.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-7"><a href="data-1.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb1-8"><a href="data-1.html#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="data-1.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Deutschrapper:innen ----------------------------------------------------------</span></span>
<span id="cb1-10"><a href="data-1.html#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="data-1.html#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Einem Objekt (url) die URL der Seite zuweisen aus der die Daten gescraped werden sollen</span></span>
<span id="cb1-12"><a href="data-1.html#cb1-12" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">&quot;https://de.wikipedia.org/wiki/Liste_von_Hip-Hop-Musikern_Deutschlands&quot;</span></span>
<span id="cb1-13"><a href="data-1.html#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="data-1.html#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Einem objekt die html zuweisen die aus der url gelesen wird.</span></span>
<span id="cb1-15"><a href="data-1.html#cb1-15" aria-hidden="true" tabindex="-1"></a>rapperhtml <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb1-16"><a href="data-1.html#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="data-1.html#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="do">## Im Quellcode der Website nach dem Objekt oder der ID suchen das gescraped werden soll und über html_nodes Objekte anzeigen lassen.</span></span>
<span id="cb1-18"><a href="data-1.html#cb1-18" aria-hidden="true" tabindex="-1"></a>rapperhtml <span class="sc">%&gt;%</span> </span>
<span id="cb1-19"><a href="data-1.html#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;table&quot;</span>)</span>
<span id="cb1-20"><a href="data-1.html#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="data-1.html#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="do">## Output von html_nodes auslesen und gewünschte Tabelle in dem Code unter nth() spezifizieren.</span></span>
<span id="cb1-22"><a href="data-1.html#cb1-22" aria-hidden="true" tabindex="-1"></a>rapper <span class="ot">=</span>  </span>
<span id="cb1-23"><a href="data-1.html#cb1-23" aria-hidden="true" tabindex="-1"></a>  rapperhtml <span class="sc">%&gt;%</span> </span>
<span id="cb1-24"><a href="data-1.html#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;table&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-25"><a href="data-1.html#cb1-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nth</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-26"><a href="data-1.html#cb1-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-27"><a href="data-1.html#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="data-1.html#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="do">## Objekt als Datenframe - fertig!</span></span>
<span id="cb1-29"><a href="data-1.html#cb1-29" aria-hidden="true" tabindex="-1"></a>rapper <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(rapper)</span>
<span id="cb1-30"><a href="data-1.html#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="do">## unnötige Dateien entfernen</span></span>
<span id="cb1-31"><a href="data-1.html#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(rapperhtml, url)</span>
<span id="cb1-32"><a href="data-1.html#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="data-1.html#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="data-1.html#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Rapalben mit Platz 1 Chartplatzierung ----------------------------------------</span></span>
<span id="cb1-35"><a href="data-1.html#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="data-1.html#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="do">## Einem Objekt (url) die URL der Seite zuweisen aus der die Daten gescraped werden sollen</span></span>
<span id="cb1-37"><a href="data-1.html#cb1-37" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">&quot;https://de.wikipedia.org/wiki/Liste_der_Rapalben,_die_Platz_eins_der_deutschen_Charts_erreichten&quot;</span></span>
<span id="cb1-38"><a href="data-1.html#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="data-1.html#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="do">## Einem objekt die html zuweisen die aus der url gelesen wird.</span></span>
<span id="cb1-40"><a href="data-1.html#cb1-40" aria-hidden="true" tabindex="-1"></a>albenhtml <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb1-41"><a href="data-1.html#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="data-1.html#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="do">## Im Quellcode der Website nach dem Objekt oder der ID suchen das gescraped werden soll und über html_nodes Objekte anzeigen lassen.</span></span>
<span id="cb1-43"><a href="data-1.html#cb1-43" aria-hidden="true" tabindex="-1"></a>albenhtml <span class="sc">%&gt;%</span> </span>
<span id="cb1-44"><a href="data-1.html#cb1-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;table&quot;</span>)</span>
<span id="cb1-45"><a href="data-1.html#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="data-1.html#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="do">## Output von html_nodes auslesen und gewünschte Tabelle in dem Code unter nth() spezifizieren.</span></span>
<span id="cb1-47"><a href="data-1.html#cb1-47" aria-hidden="true" tabindex="-1"></a>alben <span class="ot">=</span>  </span>
<span id="cb1-48"><a href="data-1.html#cb1-48" aria-hidden="true" tabindex="-1"></a>  albenhtml <span class="sc">%&gt;%</span> </span>
<span id="cb1-49"><a href="data-1.html#cb1-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;table&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-50"><a href="data-1.html#cb1-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nth</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-51"><a href="data-1.html#cb1-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-52"><a href="data-1.html#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="data-1.html#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="do">## Objekt als Datenframe - fertig!</span></span>
<span id="cb1-54"><a href="data-1.html#cb1-54" aria-hidden="true" tabindex="-1"></a>alben <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(alben)</span>
<span id="cb1-55"><a href="data-1.html#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="do">## unnötige Dateien entfernen</span></span>
<span id="cb1-56"><a href="data-1.html#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(albenhtml, url)</span>
<span id="cb1-57"><a href="data-1.html#cb1-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-58"><a href="data-1.html#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Rapsingles mit Platz 1 Chartplatzierung ----------------------------------------</span></span>
<span id="cb1-59"><a href="data-1.html#cb1-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="data-1.html#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="do">## Einem Objekt (url) die URL der Seite zuweisen aus der die Daten gescraped werden sollen</span></span>
<span id="cb1-61"><a href="data-1.html#cb1-61" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="st">&quot;https://de.wikipedia.org/wiki/Liste_der_Rapsongs,_die_Platz_eins_der_deutschen_Charts_erreichten&quot;</span></span>
<span id="cb1-62"><a href="data-1.html#cb1-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-63"><a href="data-1.html#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="do">## Einem objekt die html zuweisen die aus der url gelesen wird.</span></span>
<span id="cb1-64"><a href="data-1.html#cb1-64" aria-hidden="true" tabindex="-1"></a>singleshtml <span class="ot">=</span> <span class="fu">read_html</span>(url)</span>
<span id="cb1-65"><a href="data-1.html#cb1-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-66"><a href="data-1.html#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="do">## Im Quellcode der Website nach dem Objekt oder der ID suchen das gescraped werden soll und über html_nodes Objekte anzeigen lassen.</span></span>
<span id="cb1-67"><a href="data-1.html#cb1-67" aria-hidden="true" tabindex="-1"></a>singleshtml <span class="sc">%&gt;%</span> </span>
<span id="cb1-68"><a href="data-1.html#cb1-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;table&quot;</span>)</span>
<span id="cb1-69"><a href="data-1.html#cb1-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-70"><a href="data-1.html#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="do">## Output von html_nodes auslesen und gewünschte Tabelle in dem Code unter nth() spezifizieren.</span></span>
<span id="cb1-71"><a href="data-1.html#cb1-71" aria-hidden="true" tabindex="-1"></a>singles <span class="ot">=</span>  </span>
<span id="cb1-72"><a href="data-1.html#cb1-72" aria-hidden="true" tabindex="-1"></a>  singleshtml <span class="sc">%&gt;%</span> </span>
<span id="cb1-73"><a href="data-1.html#cb1-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;table&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-74"><a href="data-1.html#cb1-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nth</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-75"><a href="data-1.html#cb1-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-76"><a href="data-1.html#cb1-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-77"><a href="data-1.html#cb1-77" aria-hidden="true" tabindex="-1"></a><span class="do">## Objekt als Datenframe - fertig!</span></span>
<span id="cb1-78"><a href="data-1.html#cb1-78" aria-hidden="true" tabindex="-1"></a>singles <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(singles)</span>
<span id="cb1-79"><a href="data-1.html#cb1-79" aria-hidden="true" tabindex="-1"></a><span class="do">## unnötige Dateien entfernen</span></span>
<span id="cb1-80"><a href="data-1.html#cb1-80" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(singleshtml, url)</span>
<span id="cb1-81"><a href="data-1.html#cb1-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-82"><a href="data-1.html#cb1-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-83"><a href="data-1.html#cb1-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Shapefiles // GIS-Files ------------------------------------------------------</span></span>
<span id="cb1-84"><a href="data-1.html#cb1-84" aria-hidden="true" tabindex="-1"></a>de_1 <span class="ot">&lt;-</span> <span class="fu">ne_states</span>(<span class="at">country =</span> <span class="st">&quot;germany&quot;</span>, <span class="at">returnclass =</span> <span class="st">&quot;sf&quot;</span>)</span>
<span id="cb1-85"><a href="data-1.html#cb1-85" aria-hidden="true" tabindex="-1"></a>de_2 <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">&quot;shapefiles/gadm41_DEU_2.shp&quot;</span>)</span></code></pre></div>
</div>
<div id="data-wrangling" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Data Wrangling<a href="data-1.html#data-wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-1.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">####################### Datensätze Rohformat ###################################</span></span>
<span id="cb2-2"><a href="data-1.html#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="data-1.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Rapper:innen Datensatz -------------------------------------------------------</span></span>
<span id="cb2-4"><a href="data-1.html#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="data-1.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Unnötige Columns entfernen</span></span>
<span id="cb2-6"><a href="data-1.html#cb2-6" aria-hidden="true" tabindex="-1"></a>rapper[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-7"><a href="data-1.html#cb2-7" aria-hidden="true" tabindex="-1"></a>rapper[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-8"><a href="data-1.html#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="data-1.html#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="do">## rename</span></span>
<span id="cb2-10"><a href="data-1.html#cb2-10" aria-hidden="true" tabindex="-1"></a>rapper <span class="ot">&lt;-</span> rapper <span class="sc">%&gt;%</span> </span>
<span id="cb2-11"><a href="data-1.html#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">city.origin =</span> Herkunft, </span>
<span id="cb2-12"><a href="data-1.html#cb2-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">birthyear =</span> Lebensdaten,</span>
<span id="cb2-13"><a href="data-1.html#cb2-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">membership.group =</span> <span class="st">`</span><span class="at">Mitgliedschaft in Bands</span><span class="st">`</span>,</span>
<span id="cb2-14"><a href="data-1.html#cb2-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">artist.name =</span> <span class="st">&quot;Künstlername&quot;</span>)</span>
<span id="cb2-15"><a href="data-1.html#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="data-1.html#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="data-1.html#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="data-1.html#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Singles Datensatz ------------------------------------------------------------</span></span>
<span id="cb2-19"><a href="data-1.html#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="data-1.html#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="do">## unnötige columns entfernen</span></span>
<span id="cb2-21"><a href="data-1.html#cb2-21" aria-hidden="true" tabindex="-1"></a>singles<span class="sc">$</span><span class="st">`</span><span class="at">Wochen in den Charts</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-22"><a href="data-1.html#cb2-22" aria-hidden="true" tabindex="-1"></a>singles<span class="sc">$</span>Jahr <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-23"><a href="data-1.html#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="data-1.html#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="do">## rename columns</span></span>
<span id="cb2-25"><a href="data-1.html#cb2-25" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles <span class="sc">%&gt;%</span> </span>
<span id="cb2-26"><a href="data-1.html#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">project.name =</span> <span class="st">&quot;Titel&quot;</span>,</span>
<span id="cb2-27"><a href="data-1.html#cb2-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">artist.name =</span> <span class="st">&quot;Künstler&quot;</span>,</span>
<span id="cb2-28"><a href="data-1.html#cb2-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">weeks.nr1 =</span> <span class="st">&quot;Wochen auf Platz 1&quot;</span>,</span>
<span id="cb2-29"><a href="data-1.html#cb2-29" aria-hidden="true" tabindex="-1"></a>         <span class="at">award =</span> <span class="st">&quot;Auszeichnung&quot;</span>)</span>
<span id="cb2-30"><a href="data-1.html#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="data-1.html#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="do">## alle nicht deutschen alben löschen</span></span>
<span id="cb2-32"><a href="data-1.html#cb2-32" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Vereinigte Staaten&quot;</span>, singles.prc<span class="sc">$</span>artist.name),]</span>
<span id="cb2-33"><a href="data-1.html#cb2-33" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Kanada&quot;</span>, singles.prc<span class="sc">$</span>artist.name),]</span>
<span id="cb2-34"><a href="data-1.html#cb2-34" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Schweden&quot;</span>, singles.prc<span class="sc">$</span>artist.name),]</span>
<span id="cb2-35"><a href="data-1.html#cb2-35" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Australien&quot;</span>, singles.prc<span class="sc">$</span>artist.name),]</span>
<span id="cb2-36"><a href="data-1.html#cb2-36" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Danemark&quot;</span>, singles.prc<span class="sc">$</span>artist.name),]</span>
<span id="cb2-37"><a href="data-1.html#cb2-37" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Finnland&quot;</span>, singles.prc<span class="sc">$</span>artist.name),]</span>
<span id="cb2-38"><a href="data-1.html#cb2-38" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Kolumbien&quot;</span>, singles.prc<span class="sc">$</span>artist.name),]</span>
<span id="cb2-39"><a href="data-1.html#cb2-39" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Niederlande&quot;</span>, singles.prc<span class="sc">$</span>artist.name),]</span>
<span id="cb2-40"><a href="data-1.html#cb2-40" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Somalia&quot;</span>, singles.prc<span class="sc">$</span>artist.name),]</span>
<span id="cb2-41"><a href="data-1.html#cb2-41" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Vereinigtes Konigreich&quot;</span>, singles.prc<span class="sc">$</span>artist.name),]</span>
<span id="cb2-42"><a href="data-1.html#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="data-1.html#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="do">## unnötige wörter entfernen</span></span>
<span id="cb2-44"><a href="data-1.html#cb2-44" aria-hidden="true" tabindex="-1"></a>list.words <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Deutschland&quot;</span>, <span class="st">&quot;und&quot;</span>, <span class="st">&quot;Kosovo&quot;</span>, <span class="st">&quot;feat.&quot;</span>)</span>
<span id="cb2-45"><a href="data-1.html#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="data-1.html#cb2-46" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc <span class="sc">%&gt;%</span> </span>
<span id="cb2-47"><a href="data-1.html#cb2-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">artist.name =</span> <span class="fu">removeWords</span>(artist.name, list.words),</span>
<span id="cb2-48"><a href="data-1.html#cb2-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">artist.name =</span> <span class="fu">trimws</span>(artist.name, <span class="at">which =</span> <span class="fu">c</span>(<span class="st">&quot;both&quot;</span>, <span class="st">&quot;left&quot;</span>, <span class="st">&quot;right&quot;</span>), <span class="at">whitespace =</span> <span class="st">&quot;[ </span><span class="sc">\t\r\n</span><span class="st">]&quot;</span>))</span>
<span id="cb2-49"><a href="data-1.html#cb2-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-50"><a href="data-1.html#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="data-1.html#cb2-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-52"><a href="data-1.html#cb2-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Alben Datensatz --------------------------------------------------------------</span></span>
<span id="cb2-53"><a href="data-1.html#cb2-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-54"><a href="data-1.html#cb2-54" aria-hidden="true" tabindex="-1"></a><span class="do">## unnötige columns entfernen</span></span>
<span id="cb2-55"><a href="data-1.html#cb2-55" aria-hidden="true" tabindex="-1"></a>alben<span class="sc">$</span><span class="st">`</span><span class="at">Wochen in den Charts</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-56"><a href="data-1.html#cb2-56" aria-hidden="true" tabindex="-1"></a>alben<span class="sc">$</span>Art <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-57"><a href="data-1.html#cb2-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-58"><a href="data-1.html#cb2-58" aria-hidden="true" tabindex="-1"></a><span class="do">## rename columns</span></span>
<span id="cb2-59"><a href="data-1.html#cb2-59" aria-hidden="true" tabindex="-1"></a>alben.prc <span class="ot">&lt;-</span> alben <span class="sc">%&gt;%</span> </span>
<span id="cb2-60"><a href="data-1.html#cb2-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">project.name =</span> Titel,</span>
<span id="cb2-61"><a href="data-1.html#cb2-61" aria-hidden="true" tabindex="-1"></a>         <span class="at">year =</span> Jahr,</span>
<span id="cb2-62"><a href="data-1.html#cb2-62" aria-hidden="true" tabindex="-1"></a>         <span class="at">artist.name =</span> <span class="st">&quot;Künstler&quot;</span>,</span>
<span id="cb2-63"><a href="data-1.html#cb2-63" aria-hidden="true" tabindex="-1"></a>         <span class="at">weeks.nr1 =</span> <span class="st">`</span><span class="at">Wochen auf Platz 1</span><span class="st">`</span>,</span>
<span id="cb2-64"><a href="data-1.html#cb2-64" aria-hidden="true" tabindex="-1"></a>         <span class="at">award =</span> Auszeichnung)</span>
<span id="cb2-65"><a href="data-1.html#cb2-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-66"><a href="data-1.html#cb2-66" aria-hidden="true" tabindex="-1"></a><span class="do">## alle nicht deutschen alben löschen</span></span>
<span id="cb2-67"><a href="data-1.html#cb2-67" aria-hidden="true" tabindex="-1"></a>alben.prc <span class="ot">&lt;-</span> alben.prc[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Vereinigte Staaten&quot;</span>, alben.prc<span class="sc">$</span>artist.name),]</span>
<span id="cb2-68"><a href="data-1.html#cb2-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-69"><a href="data-1.html#cb2-69" aria-hidden="true" tabindex="-1"></a><span class="do">## unnötige wörter entfernen</span></span>
<span id="cb2-70"><a href="data-1.html#cb2-70" aria-hidden="true" tabindex="-1"></a>list.words <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Deutschland&quot;</span>, <span class="st">&quot;und&quot;</span>)</span>
<span id="cb2-71"><a href="data-1.html#cb2-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-72"><a href="data-1.html#cb2-72" aria-hidden="true" tabindex="-1"></a>alben.prc <span class="ot">&lt;-</span> alben.prc <span class="sc">%&gt;%</span> </span>
<span id="cb2-73"><a href="data-1.html#cb2-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">artist.name =</span> <span class="fu">removeWords</span>(artist.name, list.words),</span>
<span id="cb2-74"><a href="data-1.html#cb2-74" aria-hidden="true" tabindex="-1"></a>         <span class="at">artist.name =</span> <span class="fu">trimws</span>(artist.name, <span class="at">which =</span> <span class="fu">c</span>(<span class="st">&quot;both&quot;</span>, <span class="st">&quot;left&quot;</span>, <span class="st">&quot;right&quot;</span>), <span class="at">whitespace =</span> <span class="st">&quot;[ </span><span class="sc">\t\r\n</span><span class="st">]&quot;</span>))</span></code></pre></div>
</div>
<div id="data-export-excel" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Data Export Excel<a href="data-1.html#data-export-excel" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-1.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">############################ datensatz excel ###################################</span></span>
<span id="cb3-2"><a href="data-1.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="data-1.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Datensatz erstellen mit allen Rapper:innen die eine Single oder Album auf der </span></span>
<span id="cb3-4"><a href="data-1.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 hatten, damit dieser dann händisch in excel fertig kodiert werden kann</span></span>
<span id="cb3-5"><a href="data-1.html#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="data-1.html#cb3-6" aria-hidden="true" tabindex="-1"></a>alben.prc <span class="ot">&lt;-</span> alben.prc <span class="sc">%&gt;%</span> </span>
<span id="cb3-7"><a href="data-1.html#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(artist.name, project.name, weeks.nr1, award) <span class="sc">%&gt;%</span> </span>
<span id="cb3-8"><a href="data-1.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">&quot;album&quot;</span>)</span>
<span id="cb3-9"><a href="data-1.html#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="data-1.html#cb3-10" aria-hidden="true" tabindex="-1"></a>singles.prc <span class="ot">&lt;-</span> singles.prc <span class="sc">%&gt;%</span> </span>
<span id="cb3-11"><a href="data-1.html#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(artist.name, project.name, weeks.nr1, award) <span class="sc">%&gt;%</span> </span>
<span id="cb3-12"><a href="data-1.html#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">&quot;single&quot;</span>)</span>
<span id="cb3-13"><a href="data-1.html#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="data-1.html#cb3-14" aria-hidden="true" tabindex="-1"></a>rapper.singles.alben <span class="ot">&lt;-</span> <span class="fu">rbind</span>(alben.prc, singles.prc)</span>
<span id="cb3-15"><a href="data-1.html#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="data-1.html#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co"># leftjoin mit rapper datensatz wikipedia </span></span>
<span id="cb3-17"><a href="data-1.html#cb3-17" aria-hidden="true" tabindex="-1"></a>rapper.list.complete <span class="ot">&lt;-</span> <span class="fu">left_join</span>(rapper.singles.alben, rapper, <span class="at">by=</span>(<span class="st">&quot;artist.name&quot;</span>))</span>
<span id="cb3-18"><a href="data-1.html#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="data-1.html#cb3-19" aria-hidden="true" tabindex="-1"></a>rapper.list.complete <span class="ot">&lt;-</span> rapper.list.complete <span class="sc">%&gt;%</span> </span>
<span id="cb3-20"><a href="data-1.html#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">&quot;id&quot;</span>, artist.name, project.name, type, <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-21"><a href="data-1.html#cb3-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-22"><a href="data-1.html#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="do">## export excel -&gt; dann händisch kodieren</span></span>
<span id="cb3-23"><a href="data-1.html#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">#write_xlsx(rapper.list.complete, &quot;/Users/danielkuhlen/Desktop/rapper.list.complete.xlsx&quot;)</span></span></code></pre></div>
<p>The result of the data wrangling in R is a dataset where each row represents a single or album that charted at number 1. For some rappers, their origins have already been joined to the rapper dataset. However, the problem is that groups and features cannot have their origins joined to the rapper dataset because only solo performers are listed there. Therefore, the origins for these cases are manually coded. This is done by following this schema: groups with members who have different origins are divided based on their members and coded individually. To avoid double counting a project, the number of weeks in the charts is divided by the number of collaborators.</p>
<p>For example, Bausa and Apache207 share the weeks at number 1 of their song “Madonna.” The song was in the charts for one week, so both (and their origins) will go into the final dataset with 0.5 weeks.</p>
<p>For groups that all have the same origin, like 187 Straßenbande (Hamburg), the group will be treated as a solo artist and one origin will be assigned to the group. The origin of rappers who are not listed in the rapper dataset will be researched and added manually.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-1.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">########################## finale datensatze ###################################</span></span>
<span id="cb4-2"><a href="data-1.html#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="data-1.html#cb4-3" aria-hidden="true" tabindex="-1"></a>dataset.complete <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;/Users/danielkuhlen/Desktop/UNI/Semester/6. SoSe 2022/Introduction GIS-Software/Assignments/rap.map/rapper.list.complete 2.mod.xlsx&quot;</span>)</span>
<span id="cb4-4"><a href="data-1.html#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="data-1.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># album ------------------------------------------------------------------------</span></span>
<span id="cb4-6"><a href="data-1.html#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="data-1.html#cb4-7" aria-hidden="true" tabindex="-1"></a>album.complete <span class="ot">&lt;-</span> dataset.complete <span class="sc">%&gt;%</span> </span>
<span id="cb4-8"><a href="data-1.html#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(type <span class="sc">==</span> <span class="st">&quot;album&quot;</span>)</span>
<span id="cb4-9"><a href="data-1.html#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="data-1.html#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="do">## album: wochen auf 1 nach landkreis</span></span>
<span id="cb4-11"><a href="data-1.html#cb4-11" aria-hidden="true" tabindex="-1"></a>album.kreis.weeks <span class="ot">&lt;-</span> album.complete <span class="sc">%&gt;%</span>                                       </span>
<span id="cb4-12"><a href="data-1.html#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(kreis.origin) <span class="sc">%&gt;%</span>                        </span>
<span id="cb4-13"><a href="data-1.html#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_at</span>(<span class="fu">vars</span>(weeks.nr1.adj),              </span>
<span id="cb4-14"><a href="data-1.html#cb4-14" aria-hidden="true" tabindex="-1"></a>               <span class="fu">list</span>(<span class="at">weeks.nr1.adj =</span> sum))</span>
<span id="cb4-15"><a href="data-1.html#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="data-1.html#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="do">## album: wochen auf 1 nach bundesland</span></span>
<span id="cb4-17"><a href="data-1.html#cb4-17" aria-hidden="true" tabindex="-1"></a>album.states.weeks <span class="ot">&lt;-</span> album.complete <span class="sc">%&gt;%</span> </span>
<span id="cb4-18"><a href="data-1.html#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state.origin) <span class="sc">%&gt;%</span></span>
<span id="cb4-19"><a href="data-1.html#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_at</span>(<span class="fu">vars</span>(weeks.nr1.adj),</span>
<span id="cb4-20"><a href="data-1.html#cb4-20" aria-hidden="true" tabindex="-1"></a>               <span class="fu">list</span>(<span class="at">weeks.nr1.adj =</span> sum))</span>
<span id="cb4-21"><a href="data-1.html#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="data-1.html#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co"># single -----------------------------------------------------------------------</span></span>
<span id="cb4-23"><a href="data-1.html#cb4-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-24"><a href="data-1.html#cb4-24" aria-hidden="true" tabindex="-1"></a>single.complete <span class="ot">&lt;-</span> dataset.complete <span class="sc">%&gt;%</span> </span>
<span id="cb4-25"><a href="data-1.html#cb4-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(type <span class="sc">==</span> <span class="st">&quot;single&quot;</span>)</span>
<span id="cb4-26"><a href="data-1.html#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="data-1.html#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="do">## album: wochen auf 1 nach landkreis</span></span>
<span id="cb4-28"><a href="data-1.html#cb4-28" aria-hidden="true" tabindex="-1"></a>single.kreis.weeks <span class="ot">&lt;-</span> single.complete <span class="sc">%&gt;%</span>                                       </span>
<span id="cb4-29"><a href="data-1.html#cb4-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(kreis.origin) <span class="sc">%&gt;%</span>                        </span>
<span id="cb4-30"><a href="data-1.html#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_at</span>(<span class="fu">vars</span>(weeks.nr1.adj),              </span>
<span id="cb4-31"><a href="data-1.html#cb4-31" aria-hidden="true" tabindex="-1"></a>               <span class="fu">list</span>(<span class="at">weeks.nr1.adj =</span> sum))</span>
<span id="cb4-32"><a href="data-1.html#cb4-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-33"><a href="data-1.html#cb4-33" aria-hidden="true" tabindex="-1"></a><span class="do">## album: wochen auf 1 nach bundesland</span></span>
<span id="cb4-34"><a href="data-1.html#cb4-34" aria-hidden="true" tabindex="-1"></a>single.state.weeks <span class="ot">&lt;-</span> single.complete <span class="sc">%&gt;%</span> </span>
<span id="cb4-35"><a href="data-1.html#cb4-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state.origin) <span class="sc">%&gt;%</span></span>
<span id="cb4-36"><a href="data-1.html#cb4-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_at</span>(<span class="fu">vars</span>(weeks.nr1.adj),</span>
<span id="cb4-37"><a href="data-1.html#cb4-37" aria-hidden="true" tabindex="-1"></a>               <span class="fu">list</span>(<span class="at">weeks.nr1.adj =</span> sum))</span>
<span id="cb4-38"><a href="data-1.html#cb4-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-39"><a href="data-1.html#cb4-39" aria-hidden="true" tabindex="-1"></a><span class="do">#################### Finale Datensätze mit Geodaten ############################</span></span>
<span id="cb4-40"><a href="data-1.html#cb4-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-41"><a href="data-1.html#cb4-41" aria-hidden="true" tabindex="-1"></a><span class="co"># album kreise -----------------------------------------------------------------</span></span>
<span id="cb4-42"><a href="data-1.html#cb4-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-43"><a href="data-1.html#cb4-43" aria-hidden="true" tabindex="-1"></a><span class="do">## merge shapefiles mit album.kreis.weeks</span></span>
<span id="cb4-44"><a href="data-1.html#cb4-44" aria-hidden="true" tabindex="-1"></a>album.kreise.geo <span class="ot">&lt;-</span> <span class="fu">left_join</span>(de_2, album.kreis.weeks, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;NAME_2&quot;</span> <span class="ot">=</span> <span class="st">&quot;kreis.origin&quot;</span>))</span>
<span id="cb4-45"><a href="data-1.html#cb4-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-46"><a href="data-1.html#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="co"># auf 2 nachkommastelle runden</span></span>
<span id="cb4-47"><a href="data-1.html#cb4-47" aria-hidden="true" tabindex="-1"></a>album.kreise.geo <span class="ot">&lt;-</span> album.kreise.geo <span class="sc">%&gt;%</span></span>
<span id="cb4-48"><a href="data-1.html#cb4-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weeks.nr1.adj =</span> <span class="fu">round</span>(weeks.nr1.adj, <span class="dv">2</span>))</span>
<span id="cb4-49"><a href="data-1.html#cb4-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-50"><a href="data-1.html#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Neue Variable Wochenzahl mit NA = 0</span></span>
<span id="cb4-51"><a href="data-1.html#cb4-51" aria-hidden="true" tabindex="-1"></a>album.kreise.geo <span class="ot">&lt;-</span> album.kreise.geo <span class="sc">%&gt;%</span> </span>
<span id="cb4-52"><a href="data-1.html#cb4-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weeks.nona =</span> weeks.nr1.adj)</span>
<span id="cb4-53"><a href="data-1.html#cb4-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-54"><a href="data-1.html#cb4-54" aria-hidden="true" tabindex="-1"></a>album.kreise.geo<span class="sc">$</span>weeks.nona[<span class="fu">is.na</span>(album.kreise.geo<span class="sc">$</span>weeks.nona)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb4-55"><a href="data-1.html#cb4-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-56"><a href="data-1.html#cb4-56" aria-hidden="true" tabindex="-1"></a><span class="co"># GID_2 als Name Landkreis + Wochenanzahl damit auf interaktive Karte angezeigt wird</span></span>
<span id="cb4-57"><a href="data-1.html#cb4-57" aria-hidden="true" tabindex="-1"></a>album.kreise.geo<span class="sc">$</span>GID_2 <span class="ot">&lt;-</span> <span class="fu">paste</span>(album.kreise.geo<span class="sc">$</span>NAME_2, <span class="st">&quot;:&quot;</span>, album.kreise.geo<span class="sc">$</span>weeks.nona)</span>
<span id="cb4-58"><a href="data-1.html#cb4-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-59"><a href="data-1.html#cb4-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-60"><a href="data-1.html#cb4-60" aria-hidden="true" tabindex="-1"></a><span class="co"># album bundeslaender ----------------------------------------------------------</span></span>
<span id="cb4-61"><a href="data-1.html#cb4-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-62"><a href="data-1.html#cb4-62" aria-hidden="true" tabindex="-1"></a><span class="do">## merge shapefiles mit album.kreis.weeks</span></span>
<span id="cb4-63"><a href="data-1.html#cb4-63" aria-hidden="true" tabindex="-1"></a>album.states.geo <span class="ot">&lt;-</span> <span class="fu">left_join</span>(de_1, album.states.weeks, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;name&quot;</span> <span class="ot">=</span> <span class="st">&quot;state.origin&quot;</span>))</span>
<span id="cb4-64"><a href="data-1.html#cb4-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-65"><a href="data-1.html#cb4-65" aria-hidden="true" tabindex="-1"></a><span class="co"># auf 2 nachkommastelle runden</span></span>
<span id="cb4-66"><a href="data-1.html#cb4-66" aria-hidden="true" tabindex="-1"></a>album.states.geo <span class="ot">&lt;-</span> album.states.geo <span class="sc">%&gt;%</span></span>
<span id="cb4-67"><a href="data-1.html#cb4-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weeks.nr1.adj =</span> <span class="fu">round</span>(weeks.nr1.adj, <span class="dv">2</span>))</span>
<span id="cb4-68"><a href="data-1.html#cb4-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-69"><a href="data-1.html#cb4-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Neue Variable Wochenzahl mit NA = 0</span></span>
<span id="cb4-70"><a href="data-1.html#cb4-70" aria-hidden="true" tabindex="-1"></a>album.states.geo <span class="ot">&lt;-</span> album.states.geo <span class="sc">%&gt;%</span> </span>
<span id="cb4-71"><a href="data-1.html#cb4-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weeks.nona =</span> weeks.nr1.adj)</span>
<span id="cb4-72"><a href="data-1.html#cb4-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-73"><a href="data-1.html#cb4-73" aria-hidden="true" tabindex="-1"></a>album.states.geo<span class="sc">$</span>weeks.nona[<span class="fu">is.na</span>(album.states.geo<span class="sc">$</span>weeks.nona)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb4-74"><a href="data-1.html#cb4-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-75"><a href="data-1.html#cb4-75" aria-hidden="true" tabindex="-1"></a><span class="co"># GID_2 als Name Landkreis + Wochenanzahl damit auf interaktive Karte angezeigt wird</span></span>
<span id="cb4-76"><a href="data-1.html#cb4-76" aria-hidden="true" tabindex="-1"></a>album.states.geo<span class="sc">$</span>featurecla <span class="ot">&lt;-</span> <span class="fu">paste</span>(album.states.geo<span class="sc">$</span>name, <span class="st">&quot;:&quot;</span>, album.states.geo<span class="sc">$</span>weeks.nona)</span>
<span id="cb4-77"><a href="data-1.html#cb4-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-78"><a href="data-1.html#cb4-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-79"><a href="data-1.html#cb4-79" aria-hidden="true" tabindex="-1"></a><span class="co"># singles kreise ---------------------------------------------------------------</span></span>
<span id="cb4-80"><a href="data-1.html#cb4-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-81"><a href="data-1.html#cb4-81" aria-hidden="true" tabindex="-1"></a><span class="do">## merge shapefiles mit album.kreis.weeks</span></span>
<span id="cb4-82"><a href="data-1.html#cb4-82" aria-hidden="true" tabindex="-1"></a>singles.kreise.geo <span class="ot">&lt;-</span> <span class="fu">left_join</span>(de_2, single.kreis.weeks, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;NAME_2&quot;</span> <span class="ot">=</span> <span class="st">&quot;kreis.origin&quot;</span>))</span>
<span id="cb4-83"><a href="data-1.html#cb4-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-84"><a href="data-1.html#cb4-84" aria-hidden="true" tabindex="-1"></a><span class="co"># auf 2 nachkommastelle runden</span></span>
<span id="cb4-85"><a href="data-1.html#cb4-85" aria-hidden="true" tabindex="-1"></a>singles.kreise.geo <span class="ot">&lt;-</span> singles.kreise.geo <span class="sc">%&gt;%</span></span>
<span id="cb4-86"><a href="data-1.html#cb4-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weeks.nr1.adj =</span> <span class="fu">round</span>(weeks.nr1.adj, <span class="dv">2</span>))</span>
<span id="cb4-87"><a href="data-1.html#cb4-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-88"><a href="data-1.html#cb4-88" aria-hidden="true" tabindex="-1"></a><span class="co"># Neue Variable Wochenzahl mit NA = 0</span></span>
<span id="cb4-89"><a href="data-1.html#cb4-89" aria-hidden="true" tabindex="-1"></a>singles.kreise.geo <span class="ot">&lt;-</span> singles.kreise.geo <span class="sc">%&gt;%</span> </span>
<span id="cb4-90"><a href="data-1.html#cb4-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weeks.nona =</span> weeks.nr1.adj)</span>
<span id="cb4-91"><a href="data-1.html#cb4-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-92"><a href="data-1.html#cb4-92" aria-hidden="true" tabindex="-1"></a>singles.kreise.geo<span class="sc">$</span>weeks.nona[<span class="fu">is.na</span>(singles.kreise.geo<span class="sc">$</span>weeks.nona)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb4-93"><a href="data-1.html#cb4-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-94"><a href="data-1.html#cb4-94" aria-hidden="true" tabindex="-1"></a><span class="co"># GID_2 als Name Landkreis + Wochenanzahl damit auf interaktive Karte angezeigt wird</span></span>
<span id="cb4-95"><a href="data-1.html#cb4-95" aria-hidden="true" tabindex="-1"></a>singles.kreise.geo<span class="sc">$</span>GID_2 <span class="ot">&lt;-</span> <span class="fu">paste</span>(singles.kreise.geo<span class="sc">$</span>NAME_2, <span class="st">&quot;:&quot;</span>, singles.kreise.geo<span class="sc">$</span>weeks.nona)</span>
<span id="cb4-96"><a href="data-1.html#cb4-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-97"><a href="data-1.html#cb4-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-98"><a href="data-1.html#cb4-98" aria-hidden="true" tabindex="-1"></a><span class="co"># singles bundeslaender --------------------------------------------------------</span></span>
<span id="cb4-99"><a href="data-1.html#cb4-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-100"><a href="data-1.html#cb4-100" aria-hidden="true" tabindex="-1"></a><span class="do">## merge shapefiles mit album.kreis.weeks</span></span>
<span id="cb4-101"><a href="data-1.html#cb4-101" aria-hidden="true" tabindex="-1"></a>singles.states.geo <span class="ot">&lt;-</span> <span class="fu">left_join</span>(de_1, single.state.weeks, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;name&quot;</span> <span class="ot">=</span> <span class="st">&quot;state.origin&quot;</span>))</span>
<span id="cb4-102"><a href="data-1.html#cb4-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-103"><a href="data-1.html#cb4-103" aria-hidden="true" tabindex="-1"></a><span class="co"># auf 2 nachkommastelle runden</span></span>
<span id="cb4-104"><a href="data-1.html#cb4-104" aria-hidden="true" tabindex="-1"></a>singles.states.geo <span class="ot">&lt;-</span> singles.states.geo <span class="sc">%&gt;%</span></span>
<span id="cb4-105"><a href="data-1.html#cb4-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weeks.nr1.adj =</span> <span class="fu">round</span>(weeks.nr1.adj, <span class="dv">2</span>))</span>
<span id="cb4-106"><a href="data-1.html#cb4-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-107"><a href="data-1.html#cb4-107" aria-hidden="true" tabindex="-1"></a><span class="co"># Neue Variable Wochenzahl mit NA = 0</span></span>
<span id="cb4-108"><a href="data-1.html#cb4-108" aria-hidden="true" tabindex="-1"></a>singles.states.geo <span class="ot">&lt;-</span> singles.states.geo <span class="sc">%&gt;%</span> </span>
<span id="cb4-109"><a href="data-1.html#cb4-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weeks.nona =</span> weeks.nr1.adj)</span>
<span id="cb4-110"><a href="data-1.html#cb4-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-111"><a href="data-1.html#cb4-111" aria-hidden="true" tabindex="-1"></a>singles.states.geo<span class="sc">$</span>weeks.nona[<span class="fu">is.na</span>(singles.states.geo<span class="sc">$</span>weeks.nona)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb4-112"><a href="data-1.html#cb4-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-113"><a href="data-1.html#cb4-113" aria-hidden="true" tabindex="-1"></a><span class="co"># GID_2 als Name Landkreis + Wochenanzahl damit auf interaktive Karte angezeigt wird</span></span>
<span id="cb4-114"><a href="data-1.html#cb4-114" aria-hidden="true" tabindex="-1"></a>singles.states.geo<span class="sc">$</span>featurecla <span class="ot">&lt;-</span> <span class="fu">paste</span>(singles.states.geo<span class="sc">$</span>name, <span class="st">&quot;:&quot;</span>, singles.states.geo<span class="sc">$</span>weeks.nona)</span>
<span id="cb4-115"><a href="data-1.html#cb4-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-116"><a href="data-1.html#cb4-116" aria-hidden="true" tabindex="-1"></a><span class="do">######################### Löschen Prozessdateien ###############################</span></span>
<span id="cb4-117"><a href="data-1.html#cb4-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-118"><a href="data-1.html#cb4-118" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(alben, alben.prc, album.kreis.weeks, album.states.weeks,</span>
<span id="cb4-119"><a href="data-1.html#cb4-119" aria-hidden="true" tabindex="-1"></a>   single.complete, single.kreis.weeks, single.state.weeks, singles, singles.prc,</span>
<span id="cb4-120"><a href="data-1.html#cb4-120" aria-hidden="true" tabindex="-1"></a>   rapper, rapper.list.complete, rapper.singles.alben, list.words)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="a-caucus-race-and-a-long-tale.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/danielkuhlen/germanrap.mapping/edit/master/02-tears.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/danielkuhlen/germanrap.mapping/blob/master/02-tears.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
